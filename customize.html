<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link id="tab-icon" rel="icon" type="image/gif" href="images/logos/yellow-onlyflower-logo.png">
    <title>FloLab | Customize Bouquet</title>
    <link rel="stylesheet" href="navbar.css">
    <link rel="stylesheet" href="customize.css">
</head>

<body>
    <!-- NAVBAR GRID -->
    <div class="navbar-links">

        <!-- Left Navbar Buttons -->
        <div class="left-btns">
            <div class="home-btn-div navbar-icons-width">
                <button class="home-btn" onclick="window.location.href='index.html'">
                    <img class="anim-icon" src="images/buttons/home.gif" alt="Home Icon" />
                    <span class="nav-txt">Home</span>
                </button>
            </div>

            <!-- DROPDOWN: Help -->
            <div class="nav-item dropdown navbar-icons-width">
                <div class="dropdown-trigger">
                    <img class="anim-icon" src="images/buttons/faq.gif" alt="Help Icon" />
                    <span class="nav-txt">Help ▾</span>
                </div>
                <div class="dropdown-content">
                    <a class="nav-txt" href="faq.html">FAQ</a>
                    <a class="nav-txt" href="contact.html">Contact Us</a>
                </div>
            </div>

            <!-- DROPDOWN: Bouquets -->
            <div class="nav-item dropdown navbar-icons-width">
                <div class="dropdown-trigger">
                    <img class="anim-icon" src="images/logos/logo-flower.png" alt="Bouquets Icon" />
                    <span class="nav-txt">Bouquets ▾</span>
                </div>
                <div class="dropdown-content">
                    <a class="nav-txt" href="products.html">Pre-built</a>
                    <a class="nav-txt" href="customize.html">Customize</a>
                </div>
            </div>
        </div>


        <!-- CENTER LOGO -->
        <div class="logo-btn-div">
            <button class="logo-btn" onclick="window.location.href='index.html'">
                <img class="nav-logo-img" src="images/logos/main-logo.png" alt="Home Logo Button">
            </button>
        </div>

        <!-- Right Navbar Buttons -->
        <div class="right-btns">
            <div class="login-btn-div navbar-icons-width">
                <button class="auth-link" onclick="window.location.href='login.html'">
                    <img class="anim-icon" src="images/buttons/signup.gif" alt="Sign Up Icon" />
                    <span class="nav-txt">Sign Up / Log In</span>
                </button>
            </div>

            <div class="cart-btn-div navbar-icons-width">
                <button class="cart-button cart-link">
                    <img class="anim-icon" src="images/buttons/cart.gif" />
                    <span class="nav-txt cart-count">0</span>
                </button>
            </div>

        </div>

    </div>
    <!-- END OF NAVBAR STUFF - COPY TILL HERE -->

    <div class="tool">
        <!-- Code of Vase Selection -->
        <div class="vases scroll">

            <!-- Scroll Div title -->
            <div class="scroll-title">
                <span>YOU MAY SWAP VASE</span>
            </div>

            <div class="vase-list scroll-list">

                <!-- Vase Card - 1 -->
                <div class="vase-card">
                    <img src="images/pots/pot1.png" class="vase-img vase-1">
                    <button class="pot-add-btn same-btn vase-btn-1">
                        <img src="images/buttons/add.png" class="scroll-btn-img">
                    </button>
                </div>
                <!-- --------- -->

                <!-- Vase Card - 2 -->
                <div class="vase-card">
                    <img src="images/pots/pot2.png" class="vase-img vase-2">
                    <button class="pot-add-btn same-btn vase-btn-2">
                        <img src="images/buttons/add.png" class="scroll-btn-img">
                    </button>
                </div>
                <!-- --------- -->

                <!-- Vase Card -->
                <div class="vase-card">
                    <img src="images/pots/pot3.png" class="vase-img vase-3">
                    <button class="pot-add-btn same-btn vase-btn-3">
                        <img src="images/buttons/add.png" class="scroll-btn-img">
                    </button>
                </div>
                <!-- --------- -->

                <!-- Vase Card -->
                <div class="vase-card">
                    <img src="images/pots/pot4.png" class="vase-img vase-4">
                    <button class="pot-add-btn same-btn vase-btn-4">
                        <img src="images/buttons/add.png" class="scroll-btn-img">
                    </button>
                </div>
                <!-- --------- -->

                <!-- Vase Card -->
                <div class="vase-card">
                    <img src="images/pots/pot5.png" class="vase-img vase-5">
                    <button class="pot-add-btn same-btn vase-btn-5">
                        <img src="images/buttons/add.png" class="scroll-btn-img">
                    </button>
                </div>
                <!-- --------- -->

                <!-- Vase Card -->
                <div class="vase-card">
                    <img src="images/pots/pot6.png" class="vase-img vase-6">
                    <button class="pot-add-btn same-btn vase-btn-6">
                        <img src="images/buttons/add.png" class="scroll-btn-img">
                    </button>
                </div>
                <!-- --------- -->

                <!-- Vase Card -->
                <div class="vase-card">
                    <img src="images/pots/pot7.png" class="vase-img vase-7">
                    <button class="pot-add-btn same-btn vase-btn-7">
                        <img src="images/buttons/add.png" class="scroll-btn-img">
                    </button>
                </div>
                <!-- --------- -->

                <!-- Vase Card -->
                <div class="vase-card">
                    <img src="images/pots/pot8.png" class="vase-img vase-8">
                    <button class="pot-add-btn same-btn vase-btn-8">
                        <img src="images/buttons/add.png" class="scroll-btn-img">
                    </button>
                </div>
                <!-- --------- -->

            </div>

        </div>

        <!-- Code of Customized Bouquet -->
        <div class="tool-screen">

            <!-- FLOWERS GO IN HERE -->
            <div class="flowers-div">

                <!-- Using JS - When user clicks the button - 
                flower image gets added in <div> below -->
                <div class="flower-container">
                    <!-- Flower images get rendered here -->
                </div>

            </div>

            <!-- VASE GO IN HERE -->
            <div class="vase-div">
                <button class="checkout-btn cart-btn">
                    <img alt="Checkout Button" class="cart-img" src="images/buttons/checkout.png">
                    <span>CHECK OUT</span>
                </button>
                <div class="tool-vase-img-div">
                    <!-- Vase Image gets rendered here -->
                    <img src="images/pots/pot1.png" alt="Bouquet Wrapper" class="tool-vase-img" style="z-index:997">
                </div>
                <button class="addtocart-btn cart-btn">
                    <img alt="Add to Cart Button" class="cart-img" src="images/buttons/add-to-cart.png">
                    <span>ADD TO CART</span>
                </button>
            </div>

            <!-- Flower Counter - counter gets rendered here -->
            <div class="counter-div">

            </div>

        </div>

        <!-- Code of Flower Selection -->
        <div class="flower scroll">
            <!-- Scroll Div title -->
            <div class="scroll-title">
                <span>SCROLL & PICK FLOWERS</span>
            </div>

            <div class="flower-list scroll-list">
                <!-- Flower Card - 1 -->
                <div class="flower-card">
                    <button class="flower-add-btn same-btn add-1">
                        <img src="images/buttons/add.png" class="scroll-btn-img">
                    </button>
                    <button class="flower-minus-btn same-btn minus-1">
                        <img src="images/buttons/minus.png" class="scroll-btn-img">
                    </button>
                    <img src="images/flowers/flower1.png" class="flower-img">
                </div>
                <!-- ----------- -->

                <!-- Flower Card - 2 -->
                <div class="flower-card">
                    <button class="flower-add-btn same-btn add-2">
                        <img src="images/buttons/add.png" class="scroll-btn-img">
                    </button>
                    <button class="flower-minus-btn same-btn minus-2">
                        <img src="images/buttons/minus.png" class="scroll-btn-img">
                    </button>
                    <img src="images/flowers/flower2.png" class="flower-img">
                </div>
                <!-- ----------- -->

                <!-- Flower Card - 3 -->
                <div class="flower-card">
                    <button class="flower-add-btn same-btn add-3">
                        <img src="images/buttons/add.png" class="scroll-btn-img">
                    </button>
                    <button class="flower-minus-btn same-btn minus-3">
                        <img src="images/buttons/minus.png" class="scroll-btn-img">
                    </button>
                    <img src="images/flowers/flower3.png" class="flower-img">
                </div>
                <!-- ----------- -->

                <!-- Flower Card - 4 -->
                <div class="flower-card">
                    <button class="flower-add-btn same-btn add-4">
                        <img src="images/buttons/add.png" class="scroll-btn-img">
                    </button>
                    <button class="flower-minus-btn same-btn minus-4">
                        <img src="images/buttons/minus.png" class="scroll-btn-img">
                    </button>
                    <img src="images/flowers/flower4.png" class="flower-img">
                </div>
                <!-- ----------- -->

                <!-- Flower Card - 5 -->
                <div class="flower-card">
                    <button class="flower-add-btn same-btn add-5">
                        <img src="images/buttons/add.png" class="scroll-btn-img">
                    </button>
                    <button class="flower-minus-btn same-btn minus-5">
                        <img src="images/buttons/minus.png" class="scroll-btn-img">
                    </button>
                    <img src="images/flowers/flower5.png" class="flower-img">
                </div>
                <!-- ----------- -->

                <!-- Flower Card - 6 -->
                <div class="flower-card">
                    <button class="flower-add-btn same-btn add-6">
                        <img src="images/buttons/add.png" class="scroll-btn-img">
                    </button>
                    <button class="flower-minus-btn same-btn minus-6">
                        <img src="images/buttons/minus.png" class="scroll-btn-img">
                    </button>
                    <img src="images/flowers/flower6.png" class="flower-img">
                </div>
                <!-- ----------- -->

                <!-- Flower Card - 7 -->
                <div class="flower-card">
                    <button class="flower-add-btn same-btn add-7">
                        <img src="images/buttons/add.png" class="scroll-btn-img">
                    </button>
                    <button class="flower-minus-btn same-btn minus-7">
                        <img src="images/buttons/minus.png" class="scroll-btn-img">
                    </button>
                    <img src="images/flowers/flower7.png" class="flower-img">
                </div>
                <!-- ----------- -->

                <!-- Flower Card - 8 -->
                <div class="flower-card">
                    <button class="flower-add-btn same-btn add-8">
                        <img src="images/buttons/add.png" class="scroll-btn-img">
                    </button>
                    <button class="flower-minus-btn same-btn minus-8">
                        <img src="images/buttons/minus.png" class="scroll-btn-img">
                    </button>
                    <img src="images/flowers/flower8.png" class="flower-img">
                </div>
                <!-- ----------- -->

                <!-- Flower Card - 9 -->
                <div class="flower-card">
                    <button class="flower-add-btn same-btn add-9">
                        <img src="images/buttons/add.png" class="scroll-btn-img">
                    </button>
                    <button class="flower-minus-btn same-btn minus-9">
                        <img src="images/buttons/minus.png" class="scroll-btn-img">
                    </button>
                    <img src="images/flowers/flower9.png" class="flower-img">
                </div>
                <!-- ----------- -->

                <!-- Flower Card - 10 -->
                <div class="flower-card">
                    <button class="flower-add-btn same-btn add-10">
                        <img src="images/buttons/add.png" class="scroll-btn-img">
                    </button>
                    <button class="flower-minus-btn same-btn minus-10">
                        <img src="images/buttons/minus.png" class="scroll-btn-img">
                    </button>
                    <img src="images/flowers/flower10.png" class="flower-img">
                </div>
                <!-- ----------- -->

            </div>

        </div>

    </div>

    <!-- Customize Tutorial Overlay  -->
    <div id="tutorial-overlay">
        <!-- Left Captions (pots) -->
        <div class="tutorial-caption left-caption-1">← Current Selection</div>
        <div class="tutorial-caption left-caption-2">← Click To Swap</div>

        <!-- Right Captions (flowers) -->
        <div class="tutorial-caption right-caption-1">Add This Flower →</div>
        <div class="tutorial-caption right-caption-2">Remove This Flower →</div>

        <!-- Center Box-->
        <div class="tutorial-center-box">
            <h2>Welcome To The Customize Page</h2>
            <button id="close-tutorial">Click To Begin</button>
        </div>
    </div>


    <!--LOADING THE JS FILE at LAST
    : This ensures the page structure is parsed before your script runs. -->
    <script src="index.js"></script>
    <script src="cart.js"></script>
    <script>

        document.addEventListener('DOMContentLoaded', () => {
            const overlay = document.getElementById('tutorial-overlay');
            const closeBtn = document.getElementById('close-tutorial');

            if (!overlay || !closeBtn) return;           // safety check

            closeBtn.addEventListener('click', () => {
                /* start fade-out */
                overlay.style.opacity = '0';
                overlay.style.pointerEvents = 'none';      // disable clicks once fading

                /* remove the element after the CSS transition ends (1 000 ms) */
                overlay.addEventListener('transitionend', () => overlay.remove(), { once: true });
            });
        });


        document.addEventListener('DOMContentLoaded', () => {

            /* buttons in the centre column */
            const addBtn = document.querySelector('.addtocart-btn');
            const ordBtn = document.querySelector('.checkout-btn');

            /* optional: show running price in the counter line */
            const counterDiv = document.querySelector('.counter-div');

            /* helper: current flower count */
            const flowerCount = () =>
                currentFlowers.filter(f => f.flower_num !== -1).length;

            /* enable / disable buttons + live counter text */
            function refreshUI() {
                const n = flowerCount();
                const price = n * 15;

                /* enable only if at least one flower */
                [addBtn, ordBtn].forEach(b => (b.disabled = n === 0));

                /* update counter text incl. price */
                counterDiv.textContent =
                    `MAX FLOWERS: ${MAX_FLOWERS} | YOU ADDED: ${n} | PRICE: $${price}`;
            }

            /* --- wire our refresh into your existing counter --- */
            const _origUpdateFlowerCounter = updateFlowerCounter;
            updateFlowerCounter = function () {
                _origUpdateFlowerCounter();   // keep the old message
                refreshUI();                  // add price / button states
            };
            refreshUI();                    // initial paint

            /* --- send bouquet to cart --- */
            function pushToCart(goCheckout) {
                const n = flowerCount();
                if (n === 0) return;          // safety; buttons already disabled

                FlowerCart.addItem({
                    id: 'custom_' + Date.now(),            // unique every time
                    name: `Custom Bouquet — ${n} flowers`,
                    price: n * 15,
                    img: 'images/occasions/custom.png'
                });

                if (goCheckout) window.location.href = 'checkout.html';
            }

            addBtn.addEventListener('click', () => pushToCart(false));
            ordBtn.addEventListener('click', () => pushToCart(true));
        });
    </script>


</body>

</html>